<!DOCTYPE html>
<html>
<head>
	<title>高阶函数之数组方法filter()与sort()</title>
	<script type="text/javascript">
		// 高阶函数：
		// 函数接收另一个函数作为参数，称之为高阶函数
		function add(x, y, f) {
		    return f(x) + f(y);
		}
		let x = add(-5, 6, Math.abs); 
		console.log(x); // 11


		// 数组的filter()方法和sort()方法 为封装好的高阶函数

		//filter用于过滤元素，接收一个函数，并作用于每个元素，根据返回值是true还是false决定保留还是丢弃该元素。

		//删掉偶数，保留奇数
		var arr = [1, 2, 4, 5, 6, 9, 10, 15];
		var r = arr.filter(function (x) {
		    return x % 2 !== 0;
		});
		console.log(r); // [1, 5, 9, 15]

		//过滤空字符串
		var arr2 = ['A', '', 'B', null, undefined, 'C', '  '];
		var r2 = arr2.filter(function (s) {
		    return s && s.trim(); // 注意：IE9以下的版本没有trim()方法
		});
		console.log(r2); // ['A', 'B', 'C']

		/*//回调函数
		var arr = ['A', 'B', 'C'];
		var r = arr.filter(function (element, index, self) {
		    console.log(element); // 依次打印'A', 'B', 'C'
		    console.log(index); // 依次打印0, 1, 2
		    console.log(self); // self就是变量arr
		    return true;
		});*/


		//利用filter，可以巧妙地去除Array的重复元素：
		var r, arr3 = ['apple', 'strawberry', 'banana', 'pear', 'apple', 'orange', 'orange', 'strawberry'];

		r = arr3.filter(function (element, index, self) {
			console.log(self.indexOf(element));
		    return self.indexOf(element) === index;
		});
		console.log(r); // ['apple','strawberry','banana','pear','orange']

		/*步骤解析：
			r = arr.filter(function (element, index, self) {

				console.log(element); // 数组每一项
			    console.log(index); // 索引
			    console.log(self); // 整个数组

				// self.indexOf(element) 只会获取到当前元素存在的第一个位置索引，即无法获取重复项的索引

			    return self.indexOf(element) === index;
  
			});
		

		*/




		// sort

		// 正序
		var arr4 = [10, 20, 1, 2];
		arr4.sort(function (x, y) {
		    return x-y;
		});
		console.log(arr4); // [1, 2, 10, 20]

		// 倒序
		var arr5 = [10, 20, 1, 2];
		arr5.sort(function (x, y) {
		    return y-x;
		});
		console.log(arr5); // [20, 10, 2, 1]

		// 忽略大小写字母排序
		var arr6 = ['Google', 'apple', 'Microsoft'];
		arr6.sort(function (s1, s2) {
		    x1 = s1.toUpperCase();
		    x2 = s2.toUpperCase();
		    if (x1 < x2) {
		        return -1;
		    }
		    if (x1 > x2) {
		        return 1;
		    }
		    return 0;
		});
		console.log(arr6); // ['apple', 'Google', 'Microsoft']
	</script>
</head>
<body>

</body>
</html>